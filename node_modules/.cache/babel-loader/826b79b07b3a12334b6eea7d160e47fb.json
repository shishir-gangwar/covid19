{"ast":null,"code":"var _jsxFileName = \"/Users/s0g03gv/Documents/MOM/covid19india-react/src/components/home.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { formatDistance } from 'date-fns';\nimport { formatDate, formatDateAbsolute, validateCTS } from '../utils/common-functions';\n/* import * as Icon from 'react-feather';\nimport {Link} from 'react-router-dom';*/\n\nimport Table from './table';\nimport Level from './level';\nimport MapExplorer from './mapexplorer';\nimport TimeSeries from './timeseries';\nimport Minigraph from './minigraph';\n/* import Patients from './patients';*/\n\nfunction Home(props) {\n  const [states, setStates] = useState([]);\n  const [stateDistrictWiseData, setStateDistrictWiseData] = useState({});\n  /* const [patients, setPatients] = useState([]);*/\n\n  const [fetched, setFetched] = useState(false);\n  const [graphOption, setGraphOption] = useState(1);\n  const [lastUpdated, setLastUpdated] = useState('');\n  const [timeseries, setTimeseries] = useState([]);\n  const [timeseriesMode, setTimeseriesMode] = useState(true);\n  const [timeseriesLogMode, setTimeseriesLogMode] = useState(false);\n  const [regionHighlighted, setRegionHighlighted] = useState(undefined);\n  useEffect(() => {\n    if (fetched === false) {\n      getStates();\n    }\n  }, [fetched]);\n\n  const getStates = async () => {\n    try {\n      const [response, stateDistrictWiseResponse] = await Promise.all([axios.get('https://api.covid19india.org/data.json'), axios.get('http://127.0.0.1:8080/MOM/api/state_district_wise-shishir.json', {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      })\n      /* axios.get('https://api.covid19india.org/raw_data.json'),*/\n      ]);\n      setStates(response.data.statewise);\n      setTimeseries(validateCTS(response.data.cases_time_series));\n      setLastUpdated(response.data.statewise[0].lastupdatedtime);\n      setStateDistrictWiseData(stateDistrictWiseResponse.data);\n      /* setPatients(rawDataResponse.data.raw_data.filter((p) => p.detectedstate));*/\n\n      setFetched(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const onHighlightState = (state, index) => {\n    if (!state && !index) setRegionHighlighted(null);else setRegionHighlighted({\n      state,\n      index\n    });\n  };\n\n  const onHighlightDistrict = (district, state, index) => {\n    if (!state && !index && !district) setRegionHighlighted(null);else setRegionHighlighted({\n      district,\n      state,\n      index\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header fadeInUp\",\n    style: {\n      animationDelay: '0.5s'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-mid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"titles\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, \"India COVID-19 Tracker\"), /*#__PURE__*/React.createElement(\"h6\", {\n    style: {\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, \"A Crowdsourced Initiative\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"last-update\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, \"Last Updated\"), /*#__PURE__*/React.createElement(\"h6\", {\n    style: {\n      color: '#28a745',\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, isNaN(Date.parse(formatDate(lastUpdated))) ? '' : formatDistance(new Date(formatDate(lastUpdated)), new Date()) + ' Ago'), /*#__PURE__*/React.createElement(\"h6\", {\n    style: {\n      color: '#28a745',\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, isNaN(Date.parse(formatDate(lastUpdated))) ? '' : formatDateAbsolute(lastUpdated))))), states.length > 1 && /*#__PURE__*/React.createElement(Level, {\n    data: states,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(Minigraph, {\n    timeseries: timeseries,\n    animate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Table, {\n    states: states,\n    summary: false,\n    stateDistrictWiseData: stateDistrictWiseData,\n    onHighlightState: onHighlightState,\n    onHighlightDistrict: onHighlightDistrict,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, fetched && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MapExplorer, {\n    states: states,\n    stateDistrictWiseData: stateDistrictWiseData,\n    regionHighlighted: regionHighlighted,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"timeseries-header fadeInUp\",\n    style: {\n      animationDelay: '1.5s'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, \"Spread Trends\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `tab ${graphOption === 1 ? 'focused' : ''}`,\n    onClick: () => {\n      setGraphOption(1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, \"Cumulative\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: `tab ${graphOption === 2 ? 'focused' : ''}`,\n    onClick: () => {\n      setGraphOption(2);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 19\n    }\n  }, \"Daily\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"scale-modes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, \"Scale Modes\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"timeseries-mode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"timeseries-mode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, \"Uniform\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: timeseriesMode,\n    className: \"switch\",\n    \"aria-label\": \"Checked by default to scale uniformly.\",\n    onChange: event => {\n      setTimeseriesMode(!timeseriesMode);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: `timeseries-logmode ${graphOption !== 1 ? 'disabled' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"timeseries-logmode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }, \"Logarithmic\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: graphOption === 1 && timeseriesLogMode,\n    className: \"switch\",\n    disabled: graphOption !== 1,\n    onChange: event => {\n      setTimeseriesLogMode(!timeseriesLogMode);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(TimeSeries, {\n    timeseries: timeseries,\n    type: graphOption,\n    mode: timeseriesMode,\n    logMode: timeseriesLogMode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/s0g03gv/Documents/MOM/covid19india-react/src/components/home.js"],"names":["React","useState","useEffect","axios","formatDistance","formatDate","formatDateAbsolute","validateCTS","Table","Level","MapExplorer","TimeSeries","Minigraph","Home","props","states","setStates","stateDistrictWiseData","setStateDistrictWiseData","fetched","setFetched","graphOption","setGraphOption","lastUpdated","setLastUpdated","timeseries","setTimeseries","timeseriesMode","setTimeseriesMode","timeseriesLogMode","setTimeseriesLogMode","regionHighlighted","setRegionHighlighted","undefined","getStates","response","stateDistrictWiseResponse","Promise","all","get","headers","data","statewise","cases_time_series","lastupdatedtime","err","console","log","onHighlightState","state","index","onHighlightDistrict","district","animationDelay","fontWeight","color","isNaN","Date","parse","length","event"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport {formatDistance} from 'date-fns';\nimport {\n  formatDate,\n  formatDateAbsolute,\n  validateCTS,\n} from '../utils/common-functions';\n/* import * as Icon from 'react-feather';\nimport {Link} from 'react-router-dom';*/\n\nimport Table from './table';\nimport Level from './level';\nimport MapExplorer from './mapexplorer';\nimport TimeSeries from './timeseries';\nimport Minigraph from './minigraph';\n/* import Patients from './patients';*/\n\nfunction Home(props) {\n  const [states, setStates] = useState([]);\n  const [stateDistrictWiseData, setStateDistrictWiseData] = useState({});\n  /* const [patients, setPatients] = useState([]);*/\n  const [fetched, setFetched] = useState(false);\n  const [graphOption, setGraphOption] = useState(1);\n  const [lastUpdated, setLastUpdated] = useState('');\n  const [timeseries, setTimeseries] = useState([]);\n  const [timeseriesMode, setTimeseriesMode] = useState(true);\n  const [timeseriesLogMode, setTimeseriesLogMode] = useState(false);\n  const [regionHighlighted, setRegionHighlighted] = useState(undefined);\n\n  useEffect(() => {\n    if (fetched === false) {\n      getStates();\n    }\n  }, [fetched]);\n\n  const getStates = async () => {\n    try {\n      const [response, stateDistrictWiseResponse] = await Promise.all([\n        axios.get('https://api.covid19india.org/data.json'),\n        axios.get('http://127.0.0.1:8080/MOM/api/state_district_wise-shishir.json',{ headers: {'Access-Control-Allow-Origin': '*'} }\n        ),\n        /* axios.get('https://api.covid19india.org/raw_data.json'),*/\n      ]);\n      setStates(response.data.statewise);\n      setTimeseries(validateCTS(response.data.cases_time_series));\n      setLastUpdated(response.data.statewise[0].lastupdatedtime);\n      setStateDistrictWiseData(stateDistrictWiseResponse.data);\n      /* setPatients(rawDataResponse.data.raw_data.filter((p) => p.detectedstate));*/\n      setFetched(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const onHighlightState = (state, index) => {\n    if (!state && !index) setRegionHighlighted(null);\n    else setRegionHighlighted({state, index});\n  };\n  const onHighlightDistrict = (district, state, index) => {\n    if (!state && !index && !district) setRegionHighlighted(null);\n    else setRegionHighlighted({district, state, index});\n  };\n\n  return (\n    <div className=\"Home\">\n      <div className=\"home-left\">\n        <div className=\"header fadeInUp\" style={{animationDelay: '0.5s'}}>\n          <div className=\"header-mid\">\n            <div className=\"titles\">\n              <h1>India COVID-19 Tracker</h1>\n              <h6 style={{fontWeight: 600}}>A Crowdsourced Initiative</h6>\n            </div>\n            <div className=\"last-update\">\n              <h6>Last Updated</h6>\n              <h6 style={{color: '#28a745', fontWeight: 600}}>\n                {isNaN(Date.parse(formatDate(lastUpdated)))\n                  ? ''\n                  : formatDistance(\n                      new Date(formatDate(lastUpdated)),\n                      new Date()\n                    ) + ' Ago'}\n              </h6>\n              <h6 style={{color: '#28a745', fontWeight: 600}}>\n                {isNaN(Date.parse(formatDate(lastUpdated)))\n                  ? ''\n                  : formatDateAbsolute(lastUpdated)}\n              </h6>\n            </div>\n          </div>\n        </div>\n\n        {states.length > 1 && <Level data={states} />}\n        <Minigraph timeseries={timeseries} animate={true} />\n        <Table\n          states={states}\n          summary={false}\n          stateDistrictWiseData={stateDistrictWiseData}\n          onHighlightState={onHighlightState}\n          onHighlightDistrict={onHighlightDistrict}\n        />\n      </div>\n\n      <div className=\"home-right\">\n        {fetched && (\n          <React.Fragment>\n            <MapExplorer\n              states={states}\n              stateDistrictWiseData={stateDistrictWiseData}\n              regionHighlighted={regionHighlighted}\n            />\n\n            <div\n              className=\"timeseries-header fadeInUp\"\n              style={{animationDelay: '1.5s'}}\n            >\n              <h1>Spread Trends</h1>\n              <div className=\"tabs\">\n                <div\n                  className={`tab ${graphOption === 1 ? 'focused' : ''}`}\n                  onClick={() => {\n                    setGraphOption(1);\n                  }}\n                >\n                  <h4>Cumulative</h4>\n                </div>\n                <div\n                  className={`tab ${graphOption === 2 ? 'focused' : ''}`}\n                  onClick={() => {\n                    setGraphOption(2);\n                  }}\n                >\n                  <h4>Daily</h4>\n                </div>\n              </div>\n\n              <div className=\"scale-modes\">\n                <label>Scale Modes</label>\n                <div className=\"timeseries-mode\">\n                  <label htmlFor=\"timeseries-mode\">Uniform</label>\n                  <input\n                    type=\"checkbox\"\n                    checked={timeseriesMode}\n                    className=\"switch\"\n                    aria-label=\"Checked by default to scale uniformly.\"\n                    onChange={(event) => {\n                      setTimeseriesMode(!timeseriesMode);\n                    }}\n                  />\n                </div>\n                <div\n                  className={`timeseries-logmode ${\n                    graphOption !== 1 ? 'disabled' : ''\n                  }`}\n                >\n                  <label htmlFor=\"timeseries-logmode\">Logarithmic</label>\n                  <input\n                    type=\"checkbox\"\n                    checked={graphOption === 1 && timeseriesLogMode}\n                    className=\"switch\"\n                    disabled={graphOption !== 1}\n                    onChange={(event) => {\n                      setTimeseriesLogMode(!timeseriesLogMode);\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <TimeSeries\n              timeseries={timeseries}\n              type={graphOption}\n              mode={timeseriesMode}\n              logMode={timeseriesLogMode}\n            />\n\n            {/* Testing Rebuild*/}\n          </React.Fragment>\n        )}\n      </div>\n\n      {/* <div className=\"home-left\">\n        {patients.length > 1 && (\n          <div className=\"patients-summary\">\n            <h1>Recent Cases</h1>\n            <h6>A summary of the latest reported cases</h6>\n            <div className=\"legend\">\n              <div className=\"legend-left\">\n                <div className=\"circle is-female\"></div>\n                <h5 className=\"is-female\">Female</h5>\n                <div className=\"circle is-male\"></div>\n                <h5 className=\"is-male\">Male</h5>\n                <div className=\"circle\"></div>\n                <h5 className=\"\">Unknown</h5>\n              </div>\n            </div>\n            <div className=\"patients-summary-wrapper\">\n              <Patients\n                patients={patients}\n                summary={true}\n                colorMode={'genders'}\n              />\n            </div>\n            <button className=\"button\">\n              <Link to=\"/database\">\n                <Icon.Database />\n                <span>View the Patients Database</span>\n              </Link>\n            </button>\n          </div>\n        )}\n      </div>\n      <div className=\"home-right\"></div>\n    */}\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}